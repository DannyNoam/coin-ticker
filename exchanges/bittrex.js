const axios = require('axios');

function bittrex(pair) {
  const availablePairs = {
    "ethbtc": "BTC-ETH",
    "xrpbtc": "BTC-XRP",
    "etcbtc": "BTC-ETC",
    "rddbtc": "BTC-RDD",
    "ltcbtc": "BTC-LTC",
    "dgbbtc": "BTC-DGB",
    "xembtc": "BTC-XEM",
    "xmrbtc": "BTC-XMR",
    "dogebtc": "BTC-DOGE",
    "stratbtc": "BTC-STRAT",
    "zecbtc": "BTC-ZEC",
    "wavesbtc": "BTC-WAVES",
    "gntbtc": "BTC-GNT",
    "antbtc": "BTC-ANT",
    "xvgbtc": "BTC-XVG",
    "scbtc": "BTC-SC",
    "voxbtc": "BTC-VOX",
    "dashbtc": "BTC-DASH",
    "lskbtc": "BTC-LSK",
    "hmqbtc": "BTC-HMQ",
    "xlmbtc": "BTC-XLM",
    "pivxbtc": "BTC-PIVX",
    "trstbtc": "BTC-TRST",
    "dgdbtc": "BTC-DGD",
    "repbtc": "BTC-REP",
    "gamebtc": "BTC-GAME",
    "musicbtc": "BTC-MUSIC",
    "btsbtc": "BTC-BTS",
    "steembtc": "BTC-STEEM",
    "edgbtc": "BTC-EDG",
    "fctbtc": "BTC-FCT",
    "anteth": "ETH-ANT",
    "sysbtc": "BTC-SYS",
    "kmdbtc": "BTC-KMD",
    "tknbtc": "BTC-TKN",
    "nxtbtc": "BTC-NXT",
    "dcrbtc": "BTC-DCR",
    "gupbtc": "BTC-GUP",
    "zclbtc": "BTC-ZCL",
    "ansbtc": "BTC-ANS",
    "ardrbtc": "BTC-ARDR",
    "snglsbtc": "BTC-SNGLS",
    "rlcbtc": "BTC-RLC",
    "xdnbtc": "BTC-XDN",
    "btcusd": "USDT-BTC",
    "wingsbtc": "BTC-WINGS",
    "gnobtc": "BTC-GNO",
    "arkbtc": "BTC-ARK",
    "xmybtc": "BTC-XMY",
    "lbcbtc": "BTC-LBC",
    "lmcbtc": "BTC-LMC",
    "burstbtc": "BTC-BURST",
    "ubqbtc": "BTC-UBQ",
    "maidbtc": "BTC-MAID",
    "bitbbtc": "BTC-BITB",
    "xzcbtc": "BTC-XZC",
    "navbtc": "BTC-NAV",
    "gbytebtc": "BTC-GBYTE",
    "gnteth": "ETH-GNT",
    "vtcbtc": "BTC-VTC",
    "expbtc": "BTC-EXP",
    "dtbbtc": "BTC-DTB",
    "usnbtbtc": "BTC-USNBT",
    "tkneth": "ETH-TKN",
    "baybtc": "BTC-BAY",
    "gbgbtc": "BTC-GBG",
    "nlgbtc": "BTC-NLG",
    "xcpbtc": "BTC-XCP",
    "sjcxbtc": "BTC-SJCX",
    "etceth": "ETH-ETC",
    "shiftbtc": "BTC-SHIFT",
    "ampbtc": "BTC-AMP",
    "covalbtc": "BTC-COVAL",
    "gambtc": "BTC-GAM",
    "ppcbtc": "BTC-PPC",
    "swtbtc": "BTC-SWT",
    "radsbtc": "BTC-RADS",
    "nxsbtc": "BTC-NXS",
    "viabtc": "BTC-VIA",
    "dopebtc": "BTC-DOPE",
    "abybtc": "BTC-ABY",
    "2givebtc": "BTC-2GIVE",
    "muebtc": "BTC-MUE",
    "monabtc": "BTC-MONA",
    "clambtc": "BTC-CLAM",
    "ftcbtc": "BTC-FTC",
    "slrbtc": "BTC-SLR",
    "hmqeth": "ETH-HMQ",
    "timebtc": "BTC-TIME",
    "lunbtc": "BTC-LUN",
    "blkbtc": "BTC-BLK",
    "startbtc": "BTC-START",
    "thcbtc": "BTC-THC",
    "pepebtc": "BTC-PEPE",
    "iocbtc": "BTC-IOC",
    "grcbtc": "BTC-GRC",
    "xaurbtc": "BTC-XAUR",
    "pinkbtc": "BTC-PINK",
    "egcbtc": "BTC-EGC",
    "potbtc": "BTC-POT",
    "incntbtc": "BTC-INCNT",
    "mlnbtc": "BTC-MLN",
    "vrcbtc": "BTC-VRC",
    "clubbtc": "BTC-CLUB",
    "blockbtc": "BTC-BLOCK",
    "cpcbtc": "BTC-CPC",
    "crwbtc": "BTC-CRW",
    "flobtc": "BTC-FLO",
    "xwcbtc": "BTC-XWC",
    "repeth": "ETH-REP",
    "golosbtc": "BTC-GOLOS",
    "safexbtc": "BTC-SAFEX",
    "aurbtc": "BTC-AUR",
    "emc2btc": "BTC-EMC2",
    "bcybtc": "BTC-BCY",
    "darbtc": "BTC-DAR",
    "fldcbtc": "BTC-FLDC",
    "dracobtc": "BTC-DRACO",
    "vtrbtc": "BTC-VTR",
    "ionbtc": "BTC-ION",
    "emcbtc": "BTC-EMC",
    "snglseth": "ETH-SNGLS",
    "wbbbtc": "BTC-WBB",
    "nxcbtc": "BTC-NXC",
    "bsdbtc": "BTC-BSD",
    "btabtc": "BTC-BTA",
    "infxbtc": "BTC-INFX",
    "nautbtc": "BTC-NAUT",
    "iopbtc": "BTC-IOP",
    "risebtc": "BTC-RISE",
    "cannbtc": "BTC-CANN",
    "rbybtc": "BTC-RBY",
    "gcrbtc": "BTC-GCR",
    "neosbtc": "BTC-NEOS",
    "btcdbtc": "BTC-BTCD",
    "okbtc": "BTC-OK",
    "sbdbtc": "BTC-SBD",
    "ethusd": "USDT-ETH",
    "dgdeth": "ETH-DGD",
    "korebtc": "BTC-KORE",
    "aeonbtc": "BTC-AEON",
    "enrgbtc": "BTC-ENRG",
    "unbbtc": "BTC-UNB",
    "sibbtc": "BTC-SIB",
    "omnibtc": "BTC-OMNI",
    "cloakbtc": "BTC-CLOAK",
    "dmdbtc": "BTC-DMD",
    "xvcbtc": "BTC-XVC",
    "bycbtc": "BTC-BYC",
    "brkbtc": "BTC-BRK",
    "tksbtc": "BTC-TKS",
    "trustbtc": "BTC-TRUST",
    "fairbtc": "BTC-FAIR",
    "wingseth": "ETH-WINGS",
    "trsteth": "ETH-TRST",
    "xbbbtc": "BTC-XBB",
    "qwarkbtc": "BTC-QWARK",
    "blitzbtc": "BTC-BLITZ",
    "sprbtc": "BTC-SPR",
    "gupeth": "ETH-GUP",
    "txbtc": "BTC-TX",
    "exclbtc": "BTC-EXCL",
    "ptcbtc": "BTC-PTC",
    "xstbtc": "BTC-XST",
    "gldbtc": "BTC-GLD",
    "vrmbtc": "BTC-VRM",
    "hkgbtc": "BTC-HKG",
    "pdcbtc": "BTC-PDC",
    "unobtc": "BTC-UNO",
    "sphrbtc": "BTC-SPHR",
    "slsbtc": "BTC-SLS",
    "xmgbtc": "BTC-XMG",
    "gnoeth": "ETH-GNO",
    "snrgbtc": "BTC-SNRG",
    "curebtc": "BTC-CURE",
    "8bitbtc": "BTC-8BIT",
    "rlceth": "ETH-RLC",
    "jwlbtc": "BTC-JWL",
    "eflbtc": "BTC-EFL",
    "sdcbtc": "BTC-SDC",
    "dynbtc": "BTC-DYN",
    "trigbtc": "BTC-TRIG",
    "grsbtc": "BTC-GRS",
    "synxbtc": "BTC-SYNX",
    "seqbtc": "BTC-SEQ",
    "agrsbtc": "BTC-AGRS",
    "pkbbtc": "BTC-PKB",
    "geobtc": "BTC-GEO",
    "luneth": "ETH-LUN",
    "qtlbtc": "BTC-QTL",
    "ercbtc": "BTC-ERC",
    "swiftbtc": "BTC-SWIFT",
    "btcbitcny": "BITCNY-BTC",
    "brxbtc": "BTC-BRX"
  }

  const currencyPair = Object.keys(availablePairs).includes(pair)
    ? pair
    : 'btcusd';
  const specifiedPair = availablePairs[currencyPair];

  return axios.get(`https://bittrex.com/api/v1.1/public/getmarketsummary?market=${specifiedPair}`)
    .then((res) => {
      const { Last, Ask, Bid, Volume, High, Low } = res.data.result[0]

      return {
        last: Last,
        ask: Ask,
        bid: Bid,
        low: Low,
        high: High,
        vol: Volume,
        timestamp: Date.now() / 1000,
        exchange: 'bittrex',
        pair: currencyPair,
      };
    });
}

module.exports = bittrex;
